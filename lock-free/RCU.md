## 概念性的东西

##### 阻塞型同步

mutex

semaphore

mutex是0-1型信号量

##### 非阻塞型同步

wait-free，所有线程都可以持续推进

lock-free，起码有一个线程可以推进

obstruction-free，一旦条件变化，就需要回滚，性能非常差



lock-free算法很重要

原子操作

自旋锁



RCU（Read-Copy Update）

读者可以不用任何锁就访问它，写者则先拷贝一个副本，然后修改副本，最后回调，在一个合适的时机进行写入。



QSBR算法

识别出不活动状态，比如几个线程读，一个线程写，那么在几个读的线程都是之前的内容，在这个时候，写线程，注册回调函数，其他几个线程结束的时候，给出了一个调用，说自己不活动了，这个时候才调用注册的回调函数。



总共包括三种状态，removal，grace period（宽限期），reclamation

静止状态QS（Quiescent State）



RCU主要是应用于读操作很多的情况，如果写操作非常多，性能会变差



总之，我觉得还是去Linux下读读源码吧。最根本的难点在于，Linux还考虑了其他影响RCU的各种情况。啊。。。



## 使用RCU





## 源码阅读
